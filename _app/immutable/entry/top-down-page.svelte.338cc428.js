import{S as Z,i as $,s as x,k as v,q as M,a as G,l as b,m as I,r as R,h as _,c as P,n as E,b as L,F as d,G as Y,N as W,E as z,u as U,O as fe,P as X,Q as De,R as Ve,T as Ce,w as N,U as j,y as te,M as Ge,z as le,A as ie,V as H,g as ne,d as oe,B as re}from"../chunks/index.2112c2c0.js";import{a as Q,g as Pe}from"../chunks/functions.bf28bd45.js";import{I as Ae}from"../chunks/item_pages.b3f24859.js";function de(s,e,l){const t=s.slice();return t[3]=e[l],t[5]=l,t}function me(s,e,l){const t=s.slice();return t[6]=e[l],t[8]=l,t}function he(s){let e,l,t,i,o,n,r=s[6].item+"",c,f,u,a=s[6].count.toFixed(2)+"",m,T,h,k=s[6].amount.toFixed(2)+"",w,V;return{c(){e=v("td"),l=v("div"),t=v("img"),o=G(),n=v("div"),c=M(r),f=G(),u=v("div"),m=M(a),T=G(),h=v("div"),w=M(k),V=M(" / min"),this.h()},l(D){e=b(D,"TD",{class:!0});var g=I(e);l=b(g,"DIV",{});var C=I(l);t=b(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(_),o=P(g),n=b(g,"DIV",{});var O=I(n);c=R(O,r),O.forEach(_),f=P(g),u=b(g,"DIV",{});var q=I(u);m=R(q,a),q.forEach(_),T=P(g),h=b(g,"DIV",{});var B=I(h);w=R(B,k),V=R(B," / min"),B.forEach(_),g.forEach(_),this.h()},h(){z(t.src,i=s[0][s[6].item])||E(t,"src",i),E(t,"alt",""),E(t,"class","svelte-f8yrmu"),E(e,"class","svelte-f8yrmu")},m(D,g){L(D,e,g),d(e,l),d(l,t),d(e,o),d(e,n),d(n,c),d(e,f),d(e,u),d(u,m),d(e,T),d(e,h),d(h,w),d(h,V)},p(D,g){g&3&&!z(t.src,i=D[0][D[6].item])&&E(t,"src",i),g&2&&r!==(r=D[6].item+"")&&U(c,r),g&2&&a!==(a=D[6].count.toFixed(2)+"")&&U(m,a),g&2&&k!==(k=D[6].amount.toFixed(2)+"")&&U(w,k)},d(D){D&&_(e)}}}function _e(s){let e,l,t=s[3],i=[];for(let o=0;o<t.length;o+=1)i[o]=he(me(s,t,o));return{c(){e=v("tr");for(let o=0;o<i.length;o+=1)i[o].c();l=G()},l(o){e=b(o,"TR",{});var n=I(e);for(let r=0;r<i.length;r+=1)i[r].l(n);l=P(n),n.forEach(_)},m(o,n){L(o,e,n);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);d(e,l)},p(o,n){if(n&3){t=o[3];let r;for(r=0;r<t.length;r+=1){const c=me(o,t,r);i[r]?i[r].p(c,n):(i[r]=he(c),i[r].c(),i[r].m(e,l))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(o){o&&_(e),W(i,o)}}}function Fe(s){let e,l,t,i,o,n,r=s[1],c=[];for(let f=0;f<r.length;f+=1)c[f]=_e(de(s,r,f));return{c(){e=v("div"),l=v("h2"),t=M("Overall production summary"),i=G(),o=v("table"),n=v("tbody");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=b(f,"DIV",{class:!0});var u=I(e);l=b(u,"H2",{class:!0});var a=I(l);t=R(a,"Overall production summary"),a.forEach(_),i=P(u),o=b(u,"TABLE",{});var m=I(o);n=b(m,"TBODY",{});var T=I(n);for(let h=0;h<c.length;h+=1)c[h].l(T);T.forEach(_),m.forEach(_),u.forEach(_),this.h()},h(){E(l,"class","svelte-f8yrmu"),E(e,"class","top svelte-f8yrmu")},m(f,u){L(f,e,u),d(e,l),d(l,t),d(e,i),d(e,o),d(o,n);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(n,null)},p(f,[u]){if(u&3){r=f[1];let a;for(a=0;a<r.length;a+=1){const m=de(f,r,a);c[a]?c[a].p(m,u):(c[a]=_e(m),c[a].c(),c[a].m(n,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=r.length}},i:Y,o:Y,d(f){f&&_(e),W(c,f)}}}function ye(s,e){[e.product].forEach(l=>{if(l){s[l.item]||(s[l.item]={item:l.item,count:0,amount:0});const t=s[l.item];t.count+=e.count,t.amount+=l.amountPerMinute}}),e.ingredients.forEach(l=>ye(s,l))}function Me(s,e,l){let{productionTree:t}=e,{images:i}=e,o=[];return s.$$set=n=>{"productionTree"in n&&l(2,t=n.productionTree),"images"in n&&l(0,i=n.images)},s.$$.update=()=>{if(s.$$.dirty&6&&t){let n={};ye(n,t);const r=Q[t.product.item];l(1,o=Array(r+1).fill("").map(c=>new Array)),Object.values(n).forEach(c=>{const f=c.item,u=Q[f];o[r-u].push(c)})}},[i,o,t]}class Re extends Z{constructor(e){super(),$(this,e,Me,Fe,x,{productionTree:2,images:0})}}function pe(s,e,l){const t=s.slice();return t[9]=e[l],t}function ge(s){let e,l=s[1],t=[];for(let i=0;i<l.length;i+=1)t[i]=ve(pe(s,l,i));return{c(){e=v("ul");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=b(i,"UL",{id:!0,class:!0});var o=I(e);for(let n=0;n<t.length;n+=1)t[n].l(o);o.forEach(_),this.h()},h(){E(e,"id","autocomplete-items-list"),E(e,"class","svelte-kr3isb")},m(i,o){L(i,e,o);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(i,o){if(o&18){l=i[1];let n;for(n=0;n<l.length;n+=1){const r=pe(i,l,n);t[n]?t[n].p(r,o):(t[n]=ve(r),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(i){i&&_(e),W(t,i)}}}function ve(s){let e,l=s[9]+"",t,i,o;function n(){return s[6](s[9])}return{c(){e=v("li"),t=M(l),this.h()},l(r){e=b(r,"LI",{class:!0});var c=I(e);t=R(c,l),c.forEach(_),this.h()},h(){E(e,"class","autocomplete-items svelte-kr3isb")},m(r,c){L(r,e,c),d(e,t),i||(o=X(e,"click",n),i=!0)},p(r,c){s=r,c&2&&l!==(l=s[9]+"")&&U(t,l)},d(r){r&&_(e),i=!1,o()}}}function Le(s){let e,l,t,i,o,n,r,c,f,u=s[1].length>0&&ge(s);return{c(){e=v("div"),l=v("form"),t=v("div"),i=v("input"),o=G(),n=v("input"),r=G(),u&&u.c(),this.h()},l(a){e=b(a,"DIV",{});var m=I(e);l=b(m,"FORM",{autocomplete:!0});var T=I(l);t=b(T,"DIV",{class:!0});var h=I(t);i=b(h,"INPUT",{id:!0,type:!0,placeholder:!0}),h.forEach(_),o=P(T),n=b(T,"INPUT",{type:!0}),T.forEach(_),r=P(m),u&&u.l(m),m.forEach(_),this.h()},h(){E(i,"id","final-product"),E(i,"type","text"),E(i,"placeholder","Write item names here"),E(t,"class","autocomplete"),E(n,"type","submit"),n.hidden=!0,E(l,"autocomplete","off")},m(a,m){L(a,e,m),d(e,l),d(l,t),d(t,i),fe(i,s[0]),d(l,o),d(l,n),d(e,r),u&&u.m(e,null),c||(f=[X(i,"input",s[5]),X(i,"input",s[3]),X(l,"submit",De(s[2]))],c=!0)},p(a,[m]){m&1&&i.value!==a[0]&&fe(i,a[0]),a[1].length>0?u?u.p(a,m):(u=ge(a),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:Y,o:Y,d(a){a&&_(e),u&&u.d(),c=!1,Ve(f)}}}function Be(s,e,l){const t=Object.keys(Ae),i=Ce();let{inputValue:o=""}=e,n=[];function r(){i("submit")}function c(){o?l(1,n=t.filter(m=>m.toLowerCase().includes(o.toLowerCase()))):l(1,n=[])}function f(m){l(0,o=m),l(1,n=[]),r()}function u(){o=this.value,l(0,o)}const a=m=>f(m);return s.$$set=m=>{"inputValue"in m&&l(0,o=m.inputValue)},[o,n,r,c,f,u,a]}class Oe extends Z{constructor(e){super(),$(this,e,Be,Le,x,{inputValue:0})}}function be(s,e,l){const t=s.slice();return t[7]=e[l],t}function Te(s,e,l){const t=s.slice();return t[10]=e[l],t}function Se(s){let e,l,t,i,o,n,r,c=s[10].count+"",f,u,a,m,T,h,k,w,V=s[10].product.item+"",D,g,C,O=s[10].product.amountPerMinute.toFixed(2)+"",q,B,p,y=s[10].byproduct&&Ee(s);return{c(){e=v("table"),l=v("tr"),t=v("td"),i=v("div"),o=M("Count"),n=G(),r=v("div"),f=M(c),u=G(),a=v("td"),m=v("div"),T=v("img"),k=G(),w=v("div"),D=M(V),g=G(),C=v("td"),q=M(O),B=M(" / min"),p=G(),y&&y.c(),this.h()},l(A){e=b(A,"TABLE",{class:!0});var F=I(e);l=b(F,"TR",{});var S=I(l);t=b(S,"TD",{rowspan:!0,class:!0});var J=I(t);i=b(J,"DIV",{});var se=I(i);o=R(se,"Count"),se.forEach(_),n=P(J),r=b(J,"DIV",{});var ae=I(r);f=R(ae,c),ae.forEach(_),J.forEach(_),u=P(S),a=b(S,"TD",{class:!0});var K=I(a);m=b(K,"DIV",{});var ce=I(m);T=b(ce,"IMG",{src:!0,alt:!0,class:!0}),ce.forEach(_),k=P(K),w=b(K,"DIV",{});var ue=I(w);D=R(ue,V),ue.forEach(_),K.forEach(_),g=P(S),C=b(S,"TD",{class:!0});var ee=I(C);q=R(ee,O),B=R(ee," / min"),ee.forEach(_),S.forEach(_),p=P(F),y&&y.l(F),F.forEach(_),this.h()},h(){E(t,"rowspan","2"),E(t,"class","svelte-427c5w"),z(T.src,h=s[0][s[10].product.item])||E(T,"src",h),E(T,"alt",""),E(T,"class","svelte-427c5w"),E(a,"class","item svelte-427c5w"),E(C,"class","amount svelte-427c5w"),E(e,"class","itemnode svelte-427c5w")},m(A,F){L(A,e,F),d(e,l),d(l,t),d(t,i),d(i,o),d(t,n),d(t,r),d(r,f),d(l,u),d(l,a),d(a,m),d(m,T),d(a,k),d(a,w),d(w,D),d(l,g),d(l,C),d(C,q),d(C,B),d(e,p),y&&y.m(e,null)},p(A,F){F&2&&c!==(c=A[10].count+"")&&U(f,c),F&3&&!z(T.src,h=A[0][A[10].product.item])&&E(T,"src",h),F&2&&V!==(V=A[10].product.item+"")&&U(D,V),F&2&&O!==(O=A[10].product.amountPerMinute.toFixed(2)+"")&&U(q,O),A[10].byproduct?y?y.p(A,F):(y=Ee(A),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(A){A&&_(e),y&&y.d()}}}function Ue(s){let e=s[10]+"",l;return{c(){l=M(e)},l(t){l=R(t,e)},m(t,i){L(t,l,i)},p(t,i){i&2&&e!==(e=t[10]+"")&&U(l,e)},d(t){t&&_(l)}}}function Ee(s){let e,l,t,i,o,n,r,c=s[10].byproduct.item+"",f,u,a,m=s[10].byproduct.amountPerMinute.toFixed(2)+"",T,h;return{c(){e=v("tr"),l=v("td"),t=v("div"),i=v("img"),n=G(),r=v("div"),f=M(c),u=G(),a=v("td"),T=M(m),h=M(" / min"),this.h()},l(k){e=b(k,"TR",{});var w=I(e);l=b(w,"TD",{class:!0});var V=I(l);t=b(V,"DIV",{});var D=I(t);i=b(D,"IMG",{src:!0,alt:!0,class:!0}),D.forEach(_),n=P(V),r=b(V,"DIV",{});var g=I(r);f=R(g,c),g.forEach(_),V.forEach(_),u=P(w),a=b(w,"TD",{class:!0});var C=I(a);T=R(C,m),h=R(C," / min"),C.forEach(_),w.forEach(_),this.h()},h(){z(i.src,o=s[0][s[10].byproduct.item])||E(i,"src",o),E(i,"alt",""),E(i,"class","svelte-427c5w"),E(l,"class","svelte-427c5w"),E(a,"class","svelte-427c5w")},m(k,w){L(k,e,w),d(e,l),d(l,t),d(t,i),d(l,n),d(l,r),d(r,f),d(e,u),d(e,a),d(a,T),d(a,h)},p(k,w){w&3&&!z(i.src,o=k[0][k[10].byproduct.item])&&E(i,"src",o),w&2&&c!==(c=k[10].byproduct.item+"")&&U(f,c),w&2&&m!==(m=k[10].byproduct.amountPerMinute.toFixed(2)+"")&&U(T,m)},d(k){k&&_(e)}}}function Ie(s){let e;function l(o,n){return typeof o[10]=="string"?Ue:Se}let t=l(s),i=t(s);return{c(){e=v("td"),i.c(),this.h()},l(o){e=b(o,"TD",{class:!0});var n=I(e);i.l(n),n.forEach(_),this.h()},h(){E(e,"class","outer svelte-427c5w")},m(o,n){L(o,e,n),i.m(e,null)},p(o,n){t===(t=l(o))&&i?i.p(o,n):(i.d(1),i=t(o),i&&(i.c(),i.m(e,null)))},d(o){o&&_(e),i.d()}}}function we(s){let e,l,t=s[7],i=[];for(let o=0;o<t.length;o+=1)i[o]=Ie(Te(s,t,o));return{c(){e=v("tr");for(let o=0;o<i.length;o+=1)i[o].c();l=G()},l(o){e=b(o,"TR",{});var n=I(e);for(let r=0;r<i.length;r+=1)i[r].l(n);l=P(n),n.forEach(_)},m(o,n){L(o,e,n);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);d(e,l)},p(o,n){if(n&3){t=o[7];let r;for(r=0;r<t.length;r+=1){const c=Te(o,t,r);i[r]?i[r].p(c,n):(i[r]=Ie(c),i[r].c(),i[r].m(e,l))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(o){o&&_(e),W(i,o)}}}function qe(s){let e,l,t,i,o,n,r=s[1],c=[];for(let f=0;f<r.length;f+=1)c[f]=we(be(s,r,f));return{c(){e=v("div"),l=v("h2"),t=M("Production Graph (Scrollable)"),i=G(),o=v("table"),n=v("tbody");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=b(f,"DIV",{class:!0});var u=I(e);l=b(u,"H2",{class:!0});var a=I(l);t=R(a,"Production Graph (Scrollable)"),a.forEach(_),i=P(u),o=b(u,"TABLE",{});var m=I(o);n=b(m,"TBODY",{});var T=I(n);for(let h=0;h<c.length;h+=1)c[h].l(T);T.forEach(_),m.forEach(_),u.forEach(_),this.h()},h(){E(l,"class","svelte-427c5w"),E(e,"class","TopDownGraphDiv svelte-427c5w")},m(f,u){L(f,e,u),d(e,l),d(l,t),d(e,i),d(e,o),d(o,n);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(n,null)},p(f,[u]){if(u&3){r=f[1];let a;for(a=0;a<r.length;a+=1){const m=be(f,r,a);c[a]?c[a].p(m,u):(c[a]=we(m),c[a].c(),c[a].m(n,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=r.length}},i:Y,o:Y,d(f){f&&_(e),W(c,f)}}}function ke(s){return s.ingredients.length==0?1:s.ingredients.map(e=>ke(e)).reduce((e,l)=>e+l,0)}function Ne(s,e,l){let{selectedItem:t=""}=e,{images:i}=e,{productionTree:o}=e,n=[[]],r,c;function f(u,a=0){const m=u.product,T=Q[m.item],h=(r-T)*2;if(l(1,n[a][h]=u,n),u.ingredients.length==0)return a;let k=a-1;for(const w of u.ingredients){const V=k+1;k=f(w,V);const D=(r-Q[w.product.item])*2;for(let g=h+1;g<D;g++)l(1,n[V][g]="─",n)}do{const w=h+1;let V=a,D=a;for(let g=a;g<=k;g++)n[g][w]==="─"&&(D=g);if(V==D)break;for(let g=a;g<=k;g++)if(!n[g][w])l(1,n[g][w]="│",n);else if(g==V)l(1,n[g][w]="┌",n);else if(g==D){l(1,n[g][w]="└",n);break}else l(1,n[g][w]="├",n)}while(!1);return k}return s.$$set=u=>{"selectedItem"in u&&l(3,t=u.selectedItem),"images"in u&&l(0,i=u.images),"productionTree"in u&&l(2,o=u.productionTree)},s.$$.update=()=>{s.$$.dirty&60&&t&&(l(2,o=Pe(t)),l(4,r=Q[o.product.item]),l(5,c=ke(o)),l(1,n=Array(c).fill(null).map(()=>Array(r*2+1).fill(""))),f(o))},[i,n,o,t,r,c]}class je extends Z{constructor(e){super(),$(this,e,Ne,qe,x,{selectedItem:3,images:0,productionTree:2})}}function He(s){let e,l,t,i,o,n,r,c,f,u,a,m,T,h;function k(p){s[5](p)}let w={};s[2]!==void 0&&(w.inputValue=s[2]),t=new Oe({props:w}),N.push(()=>j(t,"inputValue",k)),t.$on("submit",s[4]);function V(p){s[6](p)}function D(p){s[7](p)}function g(p){s[8](p)}let C={};s[3]!==void 0&&(C.selectedItem=s[3]),s[1]!==void 0&&(C.productionTree=s[1]),s[0].images!==void 0&&(C.images=s[0].images),n=new je({props:C}),N.push(()=>j(n,"selectedItem",V)),N.push(()=>j(n,"productionTree",D)),N.push(()=>j(n,"images",g));function O(p){s[9](p)}function q(p){s[10](p)}let B={};return s[1]!==void 0&&(B.productionTree=s[1]),s[0].images!==void 0&&(B.images=s[0].images),a=new Re({props:B}),N.push(()=>j(a,"productionTree",O)),N.push(()=>j(a,"images",q)),{c(){e=v("meta"),l=G(),te(t.$$.fragment),o=G(),te(n.$$.fragment),u=G(),te(a.$$.fragment),this.h()},l(p){const y=Ge("svelte-qbpr0x",document.head);e=b(y,"META",{name:!0,content:!0}),y.forEach(_),l=P(p),le(t.$$.fragment,p),o=P(p),le(n.$$.fragment,p),u=P(p),le(a.$$.fragment,p),this.h()},h(){document.title="TopDown",E(e,"name","description"),E(e,"content","Top Down Production Chain Graph")},m(p,y){d(document.head,e),L(p,l,y),ie(t,p,y),L(p,o,y),ie(n,p,y),L(p,u,y),ie(a,p,y),h=!0},p(p,[y]){const A={};!i&&y&4&&(i=!0,A.inputValue=p[2],H(()=>i=!1)),t.$set(A);const F={};!r&&y&8&&(r=!0,F.selectedItem=p[3],H(()=>r=!1)),!c&&y&2&&(c=!0,F.productionTree=p[1],H(()=>c=!1)),!f&&y&1&&(f=!0,F.images=p[0].images,H(()=>f=!1)),n.$set(F);const S={};!m&&y&2&&(m=!0,S.productionTree=p[1],H(()=>m=!1)),!T&&y&1&&(T=!0,S.images=p[0].images,H(()=>T=!1)),a.$set(S)},i(p){h||(ne(t.$$.fragment,p),ne(n.$$.fragment,p),ne(a.$$.fragment,p),h=!0)},o(p){oe(t.$$.fragment,p),oe(n.$$.fragment,p),oe(a.$$.fragment,p),h=!1},d(p){_(e),p&&_(l),re(t,p),p&&_(o),re(n,p),p&&_(u),re(a,p)}}}function Ye(s,e,l){let{data:t}=e,i,o="",n="";function r(){o&&t.items.includes(o)&&l(3,n=o)}function c(h){o=h,l(2,o)}function f(h){n=h,l(3,n)}function u(h){i=h,l(1,i)}function a(h){s.$$.not_equal(t.images,h)&&(t.images=h,l(0,t))}function m(h){i=h,l(1,i)}function T(h){s.$$.not_equal(t.images,h)&&(t.images=h,l(0,t))}return s.$$set=h=>{"data"in h&&l(0,t=h.data)},[t,i,o,n,r,c,f,u,a,m,T]}class Je extends Z{constructor(e){super(),$(this,e,Ye,He,x,{data:0})}}export{Je as default};
