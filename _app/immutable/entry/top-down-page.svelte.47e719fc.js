import{S as Z,i as $,s as x,k as v,q as M,a as G,l as b,m as E,r as R,h as _,c as P,n as I,b as L,F as d,G as Y,N as W,E as z,u as U,O as fe,P as X,Q as De,R as Ve,T as Ce,w as N,U as j,y as te,M as Ge,z as le,A as ie,V as H,g as ne,d as oe,B as re}from"../chunks/index.2112c2c0.js";import{a as Q,g as Pe}from"../chunks/functions.79dc5d47.js";import{I as Ae}from"../chunks/item_pages.b3f24859.js";function de(s,e,l){const t=s.slice();return t[3]=e[l],t[5]=l,t}function he(s,e,l){const t=s.slice();return t[6]=e[l],t[8]=l,t}function me(s){let e,l,t,i,o,n,r=s[6].item+"",c,f,u,a=s[6].count.toFixed(2)+"",h,T,m,y=s[6].amount.toFixed(2)+"",w,V;return{c(){e=v("td"),l=v("div"),t=v("img"),o=G(),n=v("div"),c=M(r),f=G(),u=v("div"),h=M(a),T=G(),m=v("div"),w=M(y),V=M(" / min"),this.h()},l(D){e=b(D,"TD",{class:!0});var g=E(e);l=b(g,"DIV",{});var C=E(l);t=b(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(_),o=P(g),n=b(g,"DIV",{});var O=E(n);c=R(O,r),O.forEach(_),f=P(g),u=b(g,"DIV",{});var q=E(u);h=R(q,a),q.forEach(_),T=P(g),m=b(g,"DIV",{});var B=E(m);w=R(B,y),V=R(B," / min"),B.forEach(_),g.forEach(_),this.h()},h(){z(t.src,i=s[0][s[6].item])||I(t,"src",i),I(t,"alt",""),I(t,"class","svelte-10r3h13"),I(e,"class","svelte-10r3h13")},m(D,g){L(D,e,g),d(e,l),d(l,t),d(e,o),d(e,n),d(n,c),d(e,f),d(e,u),d(u,h),d(e,T),d(e,m),d(m,w),d(m,V)},p(D,g){g&3&&!z(t.src,i=D[0][D[6].item])&&I(t,"src",i),g&2&&r!==(r=D[6].item+"")&&U(c,r),g&2&&a!==(a=D[6].count.toFixed(2)+"")&&U(h,a),g&2&&y!==(y=D[6].amount.toFixed(2)+"")&&U(w,y)},d(D){D&&_(e)}}}function _e(s){let e,l,t=s[3],i=[];for(let o=0;o<t.length;o+=1)i[o]=me(he(s,t,o));return{c(){e=v("tr");for(let o=0;o<i.length;o+=1)i[o].c();l=G()},l(o){e=b(o,"TR",{});var n=E(e);for(let r=0;r<i.length;r+=1)i[r].l(n);l=P(n),n.forEach(_)},m(o,n){L(o,e,n);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);d(e,l)},p(o,n){if(n&3){t=o[3];let r;for(r=0;r<t.length;r+=1){const c=he(o,t,r);i[r]?i[r].p(c,n):(i[r]=me(c),i[r].c(),i[r].m(e,l))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(o){o&&_(e),W(i,o)}}}function Fe(s){let e,l,t,i,o,n,r=s[1],c=[];for(let f=0;f<r.length;f+=1)c[f]=_e(de(s,r,f));return{c(){e=v("div"),l=v("h2"),t=M("Overall production summary"),i=G(),o=v("table"),n=v("tbody");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=b(f,"DIV",{});var u=E(e);l=b(u,"H2",{class:!0});var a=E(l);t=R(a,"Overall production summary"),a.forEach(_),i=P(u),o=b(u,"TABLE",{});var h=E(o);n=b(h,"TBODY",{});var T=E(n);for(let m=0;m<c.length;m+=1)c[m].l(T);T.forEach(_),h.forEach(_),u.forEach(_),this.h()},h(){I(l,"class","svelte-10r3h13")},m(f,u){L(f,e,u),d(e,l),d(l,t),d(e,i),d(e,o),d(o,n);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(n,null)},p(f,[u]){if(u&3){r=f[1];let a;for(a=0;a<r.length;a+=1){const h=de(f,r,a);c[a]?c[a].p(h,u):(c[a]=_e(h),c[a].c(),c[a].m(n,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=r.length}},i:Y,o:Y,d(f){f&&_(e),W(c,f)}}}function ke(s,e){[e.product].forEach(l=>{if(l){s[l.item]||(s[l.item]={item:l.item,count:0,amount:0});const t=s[l.item];t.count+=e.count,t.amount+=l.amountPerMinute}}),e.ingredients.forEach(l=>ke(s,l))}function Me(s,e,l){let{productionTree:t}=e,{images:i}=e,o=[];return s.$$set=n=>{"productionTree"in n&&l(2,t=n.productionTree),"images"in n&&l(0,i=n.images)},s.$$.update=()=>{if(s.$$.dirty&6&&t){let n={};ke(n,t);const r=Q[t.product.item];l(1,o=Array(r+1).fill("").map(c=>new Array)),Object.values(n).forEach(c=>{const f=c.item,u=Q[f];o[r-u].push(c)})}},[i,o,t]}class Re extends Z{constructor(e){super(),$(this,e,Me,Fe,x,{productionTree:2,images:0})}}function pe(s,e,l){const t=s.slice();return t[9]=e[l],t}function ge(s){let e,l=s[1],t=[];for(let i=0;i<l.length;i+=1)t[i]=ve(pe(s,l,i));return{c(){e=v("ul");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=b(i,"UL",{id:!0,class:!0});var o=E(e);for(let n=0;n<t.length;n+=1)t[n].l(o);o.forEach(_),this.h()},h(){I(e,"id","autocomplete-items-list"),I(e,"class","svelte-kr3isb")},m(i,o){L(i,e,o);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(i,o){if(o&18){l=i[1];let n;for(n=0;n<l.length;n+=1){const r=pe(i,l,n);t[n]?t[n].p(r,o):(t[n]=ve(r),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(i){i&&_(e),W(t,i)}}}function ve(s){let e,l=s[9]+"",t,i,o;function n(){return s[6](s[9])}return{c(){e=v("li"),t=M(l),this.h()},l(r){e=b(r,"LI",{class:!0});var c=E(e);t=R(c,l),c.forEach(_),this.h()},h(){I(e,"class","autocomplete-items svelte-kr3isb")},m(r,c){L(r,e,c),d(e,t),i||(o=X(e,"click",n),i=!0)},p(r,c){s=r,c&2&&l!==(l=s[9]+"")&&U(t,l)},d(r){r&&_(e),i=!1,o()}}}function Le(s){let e,l,t,i,o,n,r,c,f,u=s[1].length>0&&ge(s);return{c(){e=v("div"),l=v("form"),t=v("div"),i=v("input"),o=G(),n=v("input"),r=G(),u&&u.c(),this.h()},l(a){e=b(a,"DIV",{});var h=E(e);l=b(h,"FORM",{autocomplete:!0});var T=E(l);t=b(T,"DIV",{class:!0});var m=E(t);i=b(m,"INPUT",{id:!0,type:!0,placeholder:!0}),m.forEach(_),o=P(T),n=b(T,"INPUT",{type:!0}),T.forEach(_),r=P(h),u&&u.l(h),h.forEach(_),this.h()},h(){I(i,"id","final-product"),I(i,"type","text"),I(i,"placeholder","Write item names here"),I(t,"class","autocomplete"),I(n,"type","submit"),n.hidden=!0,I(l,"autocomplete","off")},m(a,h){L(a,e,h),d(e,l),d(l,t),d(t,i),fe(i,s[0]),d(l,o),d(l,n),d(e,r),u&&u.m(e,null),c||(f=[X(i,"input",s[5]),X(i,"input",s[3]),X(l,"submit",De(s[2]))],c=!0)},p(a,[h]){h&1&&i.value!==a[0]&&fe(i,a[0]),a[1].length>0?u?u.p(a,h):(u=ge(a),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:Y,o:Y,d(a){a&&_(e),u&&u.d(),c=!1,Ve(f)}}}function Be(s,e,l){const t=Object.keys(Ae),i=Ce();let{inputValue:o=""}=e,n=[];function r(){i("submit")}function c(){o?l(1,n=t.filter(h=>h.toLowerCase().includes(o.toLowerCase()))):l(1,n=[])}function f(h){l(0,o=h),l(1,n=[]),r()}function u(){o=this.value,l(0,o)}const a=h=>f(h);return s.$$set=h=>{"inputValue"in h&&l(0,o=h.inputValue)},[o,n,r,c,f,u,a]}class Oe extends Z{constructor(e){super(),$(this,e,Be,Le,x,{inputValue:0})}}function be(s,e,l){const t=s.slice();return t[7]=e[l],t}function Te(s,e,l){const t=s.slice();return t[10]=e[l],t}function Se(s){let e,l,t,i,o,n,r,c=s[10].count+"",f,u,a,h,T,m,y,w,V=s[10].product.item+"",D,g,C,O=s[10].product.amountPerMinute.toFixed(2)+"",q,B,p,k=s[10].byproduct&&Ee(s);return{c(){e=v("table"),l=v("tr"),t=v("td"),i=v("div"),o=M("Count"),n=G(),r=v("div"),f=M(c),u=G(),a=v("td"),h=v("div"),T=v("img"),y=G(),w=v("div"),D=M(V),g=G(),C=v("td"),q=M(O),B=M(" / min"),p=G(),k&&k.c(),this.h()},l(A){e=b(A,"TABLE",{class:!0});var F=E(e);l=b(F,"TR",{});var S=E(l);t=b(S,"TD",{rowspan:!0,class:!0});var J=E(t);i=b(J,"DIV",{});var se=E(i);o=R(se,"Count"),se.forEach(_),n=P(J),r=b(J,"DIV",{});var ae=E(r);f=R(ae,c),ae.forEach(_),J.forEach(_),u=P(S),a=b(S,"TD",{class:!0});var K=E(a);h=b(K,"DIV",{});var ce=E(h);T=b(ce,"IMG",{src:!0,alt:!0,class:!0}),ce.forEach(_),y=P(K),w=b(K,"DIV",{});var ue=E(w);D=R(ue,V),ue.forEach(_),K.forEach(_),g=P(S),C=b(S,"TD",{class:!0});var ee=E(C);q=R(ee,O),B=R(ee," / min"),ee.forEach(_),S.forEach(_),p=P(F),k&&k.l(F),F.forEach(_),this.h()},h(){I(t,"rowspan","2"),I(t,"class","svelte-427c5w"),z(T.src,m=s[0][s[10].product.item])||I(T,"src",m),I(T,"alt",""),I(T,"class","svelte-427c5w"),I(a,"class","item svelte-427c5w"),I(C,"class","amount svelte-427c5w"),I(e,"class","itemnode svelte-427c5w")},m(A,F){L(A,e,F),d(e,l),d(l,t),d(t,i),d(i,o),d(t,n),d(t,r),d(r,f),d(l,u),d(l,a),d(a,h),d(h,T),d(a,y),d(a,w),d(w,D),d(l,g),d(l,C),d(C,q),d(C,B),d(e,p),k&&k.m(e,null)},p(A,F){F&2&&c!==(c=A[10].count+"")&&U(f,c),F&3&&!z(T.src,m=A[0][A[10].product.item])&&I(T,"src",m),F&2&&V!==(V=A[10].product.item+"")&&U(D,V),F&2&&O!==(O=A[10].product.amountPerMinute.toFixed(2)+"")&&U(q,O),A[10].byproduct?k?k.p(A,F):(k=Ee(A),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},d(A){A&&_(e),k&&k.d()}}}function Ue(s){let e=s[10]+"",l;return{c(){l=M(e)},l(t){l=R(t,e)},m(t,i){L(t,l,i)},p(t,i){i&2&&e!==(e=t[10]+"")&&U(l,e)},d(t){t&&_(l)}}}function Ee(s){let e,l,t,i,o,n,r,c=s[10].byproduct.item+"",f,u,a,h=s[10].byproduct.amountPerMinute.toFixed(2)+"",T,m;return{c(){e=v("tr"),l=v("td"),t=v("div"),i=v("img"),n=G(),r=v("div"),f=M(c),u=G(),a=v("td"),T=M(h),m=M(" / min"),this.h()},l(y){e=b(y,"TR",{});var w=E(e);l=b(w,"TD",{class:!0});var V=E(l);t=b(V,"DIV",{});var D=E(t);i=b(D,"IMG",{src:!0,alt:!0,class:!0}),D.forEach(_),n=P(V),r=b(V,"DIV",{});var g=E(r);f=R(g,c),g.forEach(_),V.forEach(_),u=P(w),a=b(w,"TD",{class:!0});var C=E(a);T=R(C,h),m=R(C," / min"),C.forEach(_),w.forEach(_),this.h()},h(){z(i.src,o=s[0][s[10].byproduct.item])||I(i,"src",o),I(i,"alt",""),I(i,"class","svelte-427c5w"),I(l,"class","svelte-427c5w"),I(a,"class","svelte-427c5w")},m(y,w){L(y,e,w),d(e,l),d(l,t),d(t,i),d(l,n),d(l,r),d(r,f),d(e,u),d(e,a),d(a,T),d(a,m)},p(y,w){w&3&&!z(i.src,o=y[0][y[10].byproduct.item])&&I(i,"src",o),w&2&&c!==(c=y[10].byproduct.item+"")&&U(f,c),w&2&&h!==(h=y[10].byproduct.amountPerMinute.toFixed(2)+"")&&U(T,h)},d(y){y&&_(e)}}}function Ie(s){let e;function l(o,n){return typeof o[10]=="string"?Ue:Se}let t=l(s),i=t(s);return{c(){e=v("td"),i.c(),this.h()},l(o){e=b(o,"TD",{class:!0});var n=E(e);i.l(n),n.forEach(_),this.h()},h(){I(e,"class","outer svelte-427c5w")},m(o,n){L(o,e,n),i.m(e,null)},p(o,n){t===(t=l(o))&&i?i.p(o,n):(i.d(1),i=t(o),i&&(i.c(),i.m(e,null)))},d(o){o&&_(e),i.d()}}}function we(s){let e,l,t=s[7],i=[];for(let o=0;o<t.length;o+=1)i[o]=Ie(Te(s,t,o));return{c(){e=v("tr");for(let o=0;o<i.length;o+=1)i[o].c();l=G()},l(o){e=b(o,"TR",{});var n=E(e);for(let r=0;r<i.length;r+=1)i[r].l(n);l=P(n),n.forEach(_)},m(o,n){L(o,e,n);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);d(e,l)},p(o,n){if(n&3){t=o[7];let r;for(r=0;r<t.length;r+=1){const c=Te(o,t,r);i[r]?i[r].p(c,n):(i[r]=Ie(c),i[r].c(),i[r].m(e,l))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(o){o&&_(e),W(i,o)}}}function qe(s){let e,l,t,i,o,n,r=s[1],c=[];for(let f=0;f<r.length;f+=1)c[f]=we(be(s,r,f));return{c(){e=v("div"),l=v("h2"),t=M("Production Graph (Scrollable)"),i=G(),o=v("table"),n=v("tbody");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=b(f,"DIV",{class:!0});var u=E(e);l=b(u,"H2",{class:!0});var a=E(l);t=R(a,"Production Graph (Scrollable)"),a.forEach(_),i=P(u),o=b(u,"TABLE",{});var h=E(o);n=b(h,"TBODY",{});var T=E(n);for(let m=0;m<c.length;m+=1)c[m].l(T);T.forEach(_),h.forEach(_),u.forEach(_),this.h()},h(){I(l,"class","svelte-427c5w"),I(e,"class","TopDownGraphDiv svelte-427c5w")},m(f,u){L(f,e,u),d(e,l),d(l,t),d(e,i),d(e,o),d(o,n);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(n,null)},p(f,[u]){if(u&3){r=f[1];let a;for(a=0;a<r.length;a+=1){const h=be(f,r,a);c[a]?c[a].p(h,u):(c[a]=we(h),c[a].c(),c[a].m(n,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=r.length}},i:Y,o:Y,d(f){f&&_(e),W(c,f)}}}function ye(s){return s.ingredients.length==0?1:s.ingredients.map(e=>ye(e)).reduce((e,l)=>e+l,0)}function Ne(s,e,l){let{selectedItem:t=""}=e,{images:i}=e,{productionTree:o}=e,n=[[]],r,c;function f(u,a=0){const h=u.product,T=Q[h.item],m=(r-T)*2;if(l(1,n[a][m]=u,n),u.ingredients.length==0)return a;let y=a-1;for(const w of u.ingredients){const V=y+1;y=f(w,V);const D=(r-Q[w.product.item])*2;for(let g=m+1;g<D;g++)l(1,n[V][g]="─",n)}do{const w=m+1;let V=a,D=a;for(let g=a;g<=y;g++)n[g][w]==="─"&&(D=g);if(V==D)break;for(let g=a;g<=y;g++)if(!n[g][w])l(1,n[g][w]="│",n);else if(g==V)l(1,n[g][w]="┌",n);else if(g==D){l(1,n[g][w]="└",n);break}else l(1,n[g][w]="├",n)}while(!1);return y}return s.$$set=u=>{"selectedItem"in u&&l(3,t=u.selectedItem),"images"in u&&l(0,i=u.images),"productionTree"in u&&l(2,o=u.productionTree)},s.$$.update=()=>{s.$$.dirty&60&&t&&(l(2,o=Pe(t)),l(4,r=Q[o.product.item]),l(5,c=ye(o)),l(1,n=Array(c).fill(null).map(()=>Array(r*2+1).fill(""))),f(o))},[i,n,o,t,r,c]}class je extends Z{constructor(e){super(),$(this,e,Ne,qe,x,{selectedItem:3,images:0,productionTree:2})}}function He(s){let e,l,t,i,o,n,r,c,f,u,a,h,T,m;function y(p){s[5](p)}let w={};s[2]!==void 0&&(w.inputValue=s[2]),t=new Oe({props:w}),N.push(()=>j(t,"inputValue",y)),t.$on("submit",s[4]);function V(p){s[6](p)}function D(p){s[7](p)}function g(p){s[8](p)}let C={};s[3]!==void 0&&(C.selectedItem=s[3]),s[1]!==void 0&&(C.productionTree=s[1]),s[0].images!==void 0&&(C.images=s[0].images),n=new je({props:C}),N.push(()=>j(n,"selectedItem",V)),N.push(()=>j(n,"productionTree",D)),N.push(()=>j(n,"images",g));function O(p){s[9](p)}function q(p){s[10](p)}let B={};return s[1]!==void 0&&(B.productionTree=s[1]),s[0].images!==void 0&&(B.images=s[0].images),a=new Re({props:B}),N.push(()=>j(a,"productionTree",O)),N.push(()=>j(a,"images",q)),{c(){e=v("meta"),l=G(),te(t.$$.fragment),o=G(),te(n.$$.fragment),u=G(),te(a.$$.fragment),this.h()},l(p){const k=Ge("svelte-qbpr0x",document.head);e=b(k,"META",{name:!0,content:!0}),k.forEach(_),l=P(p),le(t.$$.fragment,p),o=P(p),le(n.$$.fragment,p),u=P(p),le(a.$$.fragment,p),this.h()},h(){document.title="TopDown",I(e,"name","description"),I(e,"content","Top Down Production Chain Graph")},m(p,k){d(document.head,e),L(p,l,k),ie(t,p,k),L(p,o,k),ie(n,p,k),L(p,u,k),ie(a,p,k),m=!0},p(p,[k]){const A={};!i&&k&4&&(i=!0,A.inputValue=p[2],H(()=>i=!1)),t.$set(A);const F={};!r&&k&8&&(r=!0,F.selectedItem=p[3],H(()=>r=!1)),!c&&k&2&&(c=!0,F.productionTree=p[1],H(()=>c=!1)),!f&&k&1&&(f=!0,F.images=p[0].images,H(()=>f=!1)),n.$set(F);const S={};!h&&k&2&&(h=!0,S.productionTree=p[1],H(()=>h=!1)),!T&&k&1&&(T=!0,S.images=p[0].images,H(()=>T=!1)),a.$set(S)},i(p){m||(ne(t.$$.fragment,p),ne(n.$$.fragment,p),ne(a.$$.fragment,p),m=!0)},o(p){oe(t.$$.fragment,p),oe(n.$$.fragment,p),oe(a.$$.fragment,p),m=!1},d(p){_(e),p&&_(l),re(t,p),p&&_(o),re(n,p),p&&_(u),re(a,p)}}}function Ye(s,e,l){let{data:t}=e,i,o="",n="";function r(){o&&t.items.includes(o)&&l(3,n=o)}function c(m){o=m,l(2,o)}function f(m){n=m,l(3,n)}function u(m){i=m,l(1,i)}function a(m){s.$$.not_equal(t.images,m)&&(t.images=m,l(0,t))}function h(m){i=m,l(1,i)}function T(m){s.$$.not_equal(t.images,m)&&(t.images=m,l(0,t))}return s.$$set=m=>{"data"in m&&l(0,t=m.data)},[t,i,o,n,r,c,f,u,a,h,T]}class Je extends Z{constructor(e){super(),$(this,e,Ye,He,x,{data:0})}}export{Je as default};
